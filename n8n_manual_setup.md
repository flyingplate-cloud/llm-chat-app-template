# üîß –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ workflow –≤ n8n

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ workflow

1. –û—Ç–∫—Ä–æ–π—Ç–µ n8n: `https://n8n.flyingplate.cloud`
2. –ù–∞–∂–º–∏—Ç–µ **"Add workflow"** –∏–ª–∏ **"+"**
3. –ù–∞–∑–æ–≤–∏—Ç–µ workflow: **"Cloudflare LLM API Test"**

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Manual Trigger

1. –í –ø–æ–∏—Å–∫–µ —É–∑–ª–æ–≤ –Ω–∞–π–¥–∏—Ç–µ **"Manual Trigger"**
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –µ–≥–æ –Ω–∞ —Ö–æ–ª—Å—Ç
3. –û—Å—Ç–∞–≤—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ HTTP Request Node

1. –í –ø–æ–∏—Å–∫–µ —É–∑–ª–æ–≤ –Ω–∞–π–¥–∏—Ç–µ **"HTTP Request"**
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –µ–≥–æ –Ω–∞ —Ö–æ–ª—Å—Ç —Ä—è–¥–æ–º —Å Manual Trigger
3. –°–æ–µ–¥–∏–Ω–∏—Ç–µ Manual Trigger —Å HTTP Request

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTP Request Node

**–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```
Method: POST
URL: https://llm.flyingplate.cloud/api/chat
```

**Headers:**
```
Content-Type: application/json
```

**Body (JSON):**
```json
{
  "messages": [
    {
      "role": "user",
      "content": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞? –û—Ç–≤–µ—Ç—å –∫—Ä–∞—Ç–∫–æ."
    }
  ]
}
```

### 5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Set Node (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –ù–∞–π–¥–∏—Ç–µ **"Set"** node
2. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –ø–æ—Å–ª–µ HTTP Request
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞:

**Set Values:**
```
ai_response = {{ $json.response }}
tokens_used = {{ $json.usage.total_tokens }}
success = true
```

### 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ù–∞–∂–º–∏—Ç–µ **"Execute Workflow"**
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Manual Trigger
3. –ù–∞–∂–º–∏—Ç–µ **"Execute Node"** –Ω–∞ HTTP Request
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

```json
{
  "response": "–ü—Ä–∏–≤–µ—Ç! –£ –º–µ–Ω—è –≤—Å–µ —Ö–æ—Ä–æ—à–æ, —Å–ø–∞—Å–∏–±–æ! –ê —É —Ç–µ–±—è –∫–∞–∫ –¥–µ–ª–∞?",
  "usage": {
    "prompt_tokens": 15,
    "completion_tokens": 12,
    "total_tokens": 27
  },
  "tool_calls": []
}
```

## üîÑ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è

–î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –≤ Body:

```json
{
  "messages": [
    {
      "role": "user",
      "content": "{{ $json.message || '–ü—Ä–∏–≤–µ—Ç!' }}"
    }
  ]
}
```

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. API Key –Ω–µ –Ω—É–∂–µ–Ω
- –û—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–µ API Key –ø—É—Å—Ç—ã–º
- –í–∞—à API –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### 2. –ú–æ–¥–µ–ª—å –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- –í n8n –ø–æ–ª–µ "Model" –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º
- –ú–æ–¥–µ–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ –∫–æ–¥–µ –≤–∞—à–µ–≥–æ API

### 3. –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∞—Å—Å–∏–≤ `messages` —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ `{role, content}`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ä–æ–ª–∏: `user`, `assistant`, `system`

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤–∞—à API –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å n8n –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏!

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ workflow
2. –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
4. –°–æ–∑–¥–∞–π—Ç–µ webhook –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞